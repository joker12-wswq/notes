--------->7.10

## 简介

#### 概念

红黑树是一颗==平衡的二叉搜索树,==通过对结点进行红黑标色及旋转等操作来维护二叉搜索树的平衡

平衡树   时间复杂度   O(lgn)

#### 二叉搜索树

整体视角

- 左子树节点的值小于自身
- 右子树节点的值大于自身
- 中序遍历递增有序

#### 红黑树的性质

- 每个结点要么是==红色==，要么是黑色
- 根结点和<u>叶结点(nil)</u>（叶结点----->没有子结点/后继结点 的结点）是黑色的
- 如果一个结点是==红色==，那么他的孩子是黑色的
- 任意结点到叶节点的树链中包含相同数量的黑结点
- 查找、插入、删除的时间复杂度为: O(lgn)

## 变色与旋转

#### 为什么需要？

插入和删除过程中，可能会到红黑树的性质，变色和旋转能帮助我们维持红黑树的性质，保持红黑树的平衡

#### 变色

将红色结点变为黑色，将黑色结点变为红色

#### 旋转

红黑树的右旋操作与左旋操作是对称的

- 旋转操作不会改变树中序遍历的顺序
- 旋转操作通过降低高度高的子树的高度,增加高度低的子树的高度来维护二叉树的平衡

##### 左旋

<img src="E:/Program Files/Typora/img/image-20220710183629017.png" alt="image-20220710183629017" style="zoom:50%;" />

步骤：

1.让结点4的右孩子，即结点7，成为结点4的父亲；

2.让结点7的左子树成为结点4的右子树；

<img src="E:/Program Files/Typora/img/image-20220710185224074.png" alt="image-20220710185224074" style="zoom:50%;" />

##### 右旋

<img src="E:/Program Files/Typora/img/image-20220710185406618.png" alt="image-20220710185406618" style="zoom:50%;" />

步骤：

1.让结点4，即结点7的左孩子，成为结点7的父亲；

2.结点4的右子树成为结点7的左子树

## 插入

#### 树上的结点关系

<img src="E:/Program Files/Typora/img/image-20220710190251525.png" alt="image-20220710190251525" style="zoom: 50%;" />

#### 红黑树的插入

##### 插入

与二叉搜索树相同，大于根节点，往右插入，在和右子树的其他结点比较，大于，往右，小于，往左，直到找到合适的位置，插入结点颜色为==红色==

##### 修复

1.Z是根节点

由于根结点和叶结点(nil)是黑色的，只要<u>重新上色为黑色</u>即可

2.z的叔叔结点是==红色==的

<img src="E:/Program Files/Typora/img/image-20220710192252246.png" alt="image-20220710192252246" style="zoom:50%;" />

性质3、如果一个结点是红色，那么他的孩子是黑色的

<img src="E:/Program Files/Typora/img/image-20220710192525325.png" alt="image-20220710192525325" style="zoom:50%;" />

对Z的父结点，祖父结点以及叔结点进行变色

3.z的叔叔结点是黑色的，并且呈局部直线

<img src="E:/Program Files/Typora/img/image-20220710194937422.png" alt="image-20220710194937422" style="zoom:50%;" />

步骤：

先旋转z的祖父结点，旋转的方向取决于直线的朝向，直线朝右，则向左旋转，直线朝左，则向右旋转

<img src="E:/Program Files/Typora/img/image-20220710195741987.png" alt="image-20220710195741987" style="zoom:50%;" />

- 旋转Z的祖父结点
- 原来的父亲和祖父变色

4.z的叔叔结点是黑色，并且局部呈现三角形

<img src="E:/Program Files/Typora/img/image-20220710200052663.png" alt="image-20220710200052663" style="zoom:50%;" />

<img src="E:/Program Files/Typora/img/image-20220710200251619.png" alt="image-20220710200251619" style="zoom:50%;" />

## 删除

删除后，需要保证其性质依然成立

#### 二叉搜索树的性质

<img src="E:/Program Files/Typora/img/image-20220710201057952.png" alt="image-20220710201057952" style="zoom:50%;" />

1.没有子结点----->直接删除该结点

2.一个子结点---->

例如6号结点，删除6号结点，并将5号结点及其子树移到6号结点的位置

3.两个子结点---->

例如5号结点，将5号与4号交换位置，然后删除4号

#### 红黑树的性质

<img src="E:/Program Files/Typora/img/image-20220710202221724.png" alt="image-20220710202221724" style="zoom:50%;" />

1.删除红色结点

2.删除黑色结点

<img src="E:/Program Files/Typora/img/image-20220710202606762.png" alt="image-20220710202606762" style="zoom:50%;" />

将删除结点后，取代原位置的结点记为x，其兄弟节点记为w

<img src="E:/Program Files/Typora/img/image-20220710202922407.png" alt="image-20220710202922407" style="zoom:50%;" />